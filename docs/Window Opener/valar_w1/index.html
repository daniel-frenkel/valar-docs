<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Valar Systems Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Valar Systems Blog Atom Feed"><title data-react-helmet="true">VALAR W1: Window Opener Setup Instructions | Valar Systems</title><meta data-react-helmet="true" property="og:url" content="https://daniel-frenkel.github.io/docs/Window Opener/valar_w1"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="VALAR W1: Window Opener Setup Instructions | Valar Systems"><meta data-react-helmet="true" name="description" content="Note: 3D Printing and Assembly instructions can be found here"><meta data-react-helmet="true" property="og:description" content="Note: 3D Printing and Assembly instructions can be found here"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://daniel-frenkel.github.io/docs/Window Opener/valar_w1"><link data-react-helmet="true" rel="alternate" href="https://daniel-frenkel.github.io/docs/Window Opener/valar_w1" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://daniel-frenkel.github.io/docs/Window Opener/valar_w1" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.54412775.css">
<link rel="preload" href="/assets/js/runtime~main.ca0b9dec.js" as="script">
<link rel="preload" href="/assets/js/main.95cb241e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Documentation</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/intro">Tutorial</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro">Valar Documentation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">3D Printing Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/3D Printing Guides/3D_print_guide">3D Printing Build Guides</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">MorningRope</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/MorningRope/valar_s1">Cloud Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/MorningRope/setup_guide">Hardware Setup</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">VAL-1000</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/VAL-1000/VAL-1000">VAL-1000</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/VAL-1000/StallGuard">StallGuard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/VAL-1000/ESPHome">ESPHome Integration</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Window Opener</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/Window Opener/valar_w1">VALAR W1: Window Opener Setup Instructions</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">VALAR W1: Window Opener Setup Instructions</h1></header><div class="markdown"><p>Note: 3D Printing and Assembly instructions can be found <a href="http://help.valarsystems.com/3d_print_guides" target="_blank" rel="noopener noreferrer">here</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1-download-the-app"></a>1. Download the App<a class="hash-link" href="#1-download-the-app" title="Direct link to heading">#</a></h2><p>The Android or iOS app is required. Please download using the links below</p><p><a href="https://play.google.com/store/apps/details?id=cc.blynk.appexport.morning_rod" target="_blank" rel="noopener noreferrer">For Android</a></p><p><a href="https://apps.apple.com/al/app/morningrod/id1455653248" target="_blank" rel="noopener noreferrer">For iOS</a></p><p>Before mounting any hardware, we need to test the connection and the device.</p><p>Open up the app, create an account, and log in.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2-reset-the-wifi"></a>2. Reset the WiFi<a class="hash-link" href="#2-reset-the-wifi" title="Direct link to heading">#</a></h2><p>During manufacturing, WiFi credentials may have been stored in your device. You need to clear them out before you can connect.</p><p>If you have an &quot;Open Left&quot; window opener, the clear WiFi button is located here:</p><p><img src="https://cdn.shopify.com/s/files/1/0048/6244/3590/files/Window_Opener_WiFi_Reset.jpg?v=1610127152" alt="WiFi Reset Button Left"></p><p>If you have an &quot;Open Right&quot; window opener, the clear WiFi button is located here:</p><p><img src="https://cdn.shopify.com/s/files/1/0048/6244/3590/files/Window_Opener_WiFi_Reset_Right.jpg?v=1610127412" alt="WiFi Reset Button Right"></p><p>Hold the button for <strong>15 seconds</strong> until the LED light begins flashing quickly </p><p>The credentials are now cleared and we can connect to it.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3-adding-device-in-app"></a>3. Adding Device in App<a class="hash-link" href="#3-adding-device-in-app" title="Direct link to heading">#</a></h2><p><img src="https://cdn.shopify.com/s/files/1/0048/6244/3590/files/small_Screenshot1.jpg?v=1610130491" alt="WIFI add device 1"></p><p><img src="https://cdn.shopify.com/s/files/1/0048/6244/3590/files/Add_New_Device.jpg?v=1610131320" alt="WIFI add device 2"></p><p><strong>WARNING: Only 2.4Ghz networks will work. Your phone must be connected to a 2.4Ghz network for this to work</strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3a-initial-test"></a>3a. Initial Test<a class="hash-link" href="#3a-initial-test" title="Direct link to heading">#</a></h3><p>Before attaching the device to a window, we need to test the motor. </p><p>To select a device, find it on the main page and <strong>long press it</strong>, holding it for 2 seconds</p><p><img src="https://cdn.shopify.com/s/files/1/0048/6244/3590/files/Settings_Window_3.jpg?v=1610131256" alt="WIFI add device 2"></p><p>Select the settings tab</p><p><img src="https://cdn.shopify.com/s/files/1/0048/6244/3590/files/Settings_Window_2.jpg?v=1610131256" alt="WIFI add device 2"></p><p>Be sure &quot;DANGER: 1 CLOSE&quot; is selected. We will learn more about this later</p><p>Select &quot;FAST/LOUD&quot; so it moves faster</p><p><strong>WARNING: Damage may occur if the magnets fell out during shipment. Ensure BOTH magnets are still in the carriage</strong></p><p><strong>NOTE: If the carriage does not stop on either end and damage begins, unplug immediately</strong></p><p>Check the bottom of the carriage for both magnets. They are attached to a black set screw. </p><p><img src="https://cdn.shopify.com/s/files/1/0048/6244/3590/files/1_2.jpg?v=1610135325" alt="WIFI add device 2"></p><p>Use the purple buttons to move the opener to set it up.
1) &quot;ADJUST&quot; will open the window 1 inch, this helps when setting up the magnet
2) &quot;CLOSE&quot; will close to the end
3) &quot;OPEN&quot; will open towards the motor housing</p><p><img src="https://cdn.shopify.com/s/files/1/0048/6244/3590/files/Settings_Window1.jpg?v=1610131256" alt="WIFI add device 2"></p><p>Test out OPEN and CLOSE, ensure the carriage stops on its own on both ends</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4-attaching-to-the-window"></a>4. Attaching to the Window<a class="hash-link" href="#4-attaching-to-the-window" title="Direct link to heading">#</a></h2><p>We will cover attaching the window opener to your window and sill. The instruction only work if &quot;DANGER: 1 CLOSE&quot; is selected.</p><p>OPTIONAL: &quot;DANGER: 1 CLOSE&quot; refers to the direction of travel when closing the window. The window opener may be attached to a window that travels in either direction. If you look at the bottom of the unit, you will see a large &quot;1&quot; printed into the plastic. This is position 1. The opposite side, next to the motor is Position 2. If Position 1 is selected, that is the direction the carriage will travel in order to CLOSE your window. If Position 2 is selected, the window will close towards the motor.</p><p>You should try to use 1 CLOSE, but 2 CLOSE may also be used if required. <strong>The following instructions only work for 1 CLOSE.</strong></p><p>Pay very close attention to the instructions, otherwise damage may occur if installed poorly.</p><p><strong>DO NOT REMOVE ADHESIVE UNTIL INSTRUCTED TO LATER ON</strong></p><p>You can purchase more 3M VHB tape if an error occurs. Here is what is attached to your device, but other VHB will work as well.
<a href="https://www.mcmaster.com/76675A21" target="_blank" rel="noopener noreferrer">McMaster-Carr Purchase Link</a></p><p>Quick overview video of what we will do next</p><figure class="video_container"><iframe src="https://drive.google.com/file/d/1-1iaJNHpKYRnrCVxs312azscdo9dG1Jn/preview" width="800" height="450" frameborder="0" allowfullscreen="true"></iframe></figure><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4a-adjusting-sill-height"></a>4a. Adjusting Sill Height<a class="hash-link" href="#4a-adjusting-sill-height" title="Direct link to heading">#</a></h3><figure class="video_container"><iframe src="https://drive.google.com/file/d/1-ElJk9Vj7evdLrjtkDMWpiPavZiwAzXp/preview" width="800" height="450" frameborder="0" allowfullscreen="true"></iframe></figure><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4b-proper-positioning"></a>4b. Proper Positioning<a class="hash-link" href="#4b-proper-positioning" title="Direct link to heading">#</a></h3><figure class="video_container"><iframe src="https://drive.google.com/file/d/1-LXT9Bb7hntIYwuqFMs0nZXzBPFBcNk_/preview" width="800" height="450" frameborder="0" allowfullscreen="true"></iframe></figure><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4c-frame-and-sill-mount-setup"></a>4c. Frame and Sill Mount Setup<a class="hash-link" href="#4c-frame-and-sill-mount-setup" title="Direct link to heading">#</a></h3><figure class="video_container"><iframe src="https://drive.google.com/file/d/1nO-vsE0Z4he6Ik7Eh6WGSttWqR89i2n2/preview" width="800" height="450" frameborder="0" allowfullscreen="true"></iframe></figure><p><strong>ALLOW THE ADHESIVE TO SET FOR 24 HOURS BEFORE USING IT!!!!!!!!!</strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4d-straightening-the-window-opener"></a>4d. Straightening the Window Opener<a class="hash-link" href="#4d-straightening-the-window-opener" title="Direct link to heading">#</a></h3><p>After waiting 24 hours, let&#x27;s go ahead and straighten the window opener as best you can. We can make it better after setting it up to open/close, but for now, look at the window opener from above and try to make it as straight as possible. If it is not straightened, the opener can rip the window frame mount off by pulling it at an angle. We want to avoid this. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="5-current-and-stall-setup"></a>5. Current and Stall Setup<a class="hash-link" href="#5-current-and-stall-setup" title="Direct link to heading">#</a></h2><p>Each window requires a unique amount of force to move it. These next steps will set those parameters.</p><p><strong>WARNING:</strong> Do NOT lock your window during these steps. If your windows Auto-Lock, keep them from locking. Damage may occur if locked.</p><p><strong>NOTE:</strong> Changing speed from FAST to SLOW (or SLOW to FAST) will require resetting the current and stall parameters. </p><p>The CrushGuard feature will only work if the stall values are perfect. When the motor is running, back EMF is produced. When resistance increases, so does the back EMF. The device measures this level of back EMF and automatically stops the motor once a threshold is reached. The stall value is the threshold value and must be accurate.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="5a-step-1---set-max-distance"></a>5a. Step 1 - Set Max Distance<a class="hash-link" href="#5a-step-1---set-max-distance" title="Direct link to heading">#</a></h3><p>Press the STEP 1 button. The device will automatically measure the exact distance of travel and set it for you. You may change this if required.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="5b-step-2---set-just-open-position"></a>5b. Step 2 - Set Just-Open Position<a class="hash-link" href="#5b-step-2---set-just-open-position" title="Direct link to heading">#</a></h3><p>Your windows has two levels of friction, which are called the &quot;High-Friction&quot; zone and &quot;Low-Friction&quot; zone. The High-Friction zone is the area within the pocket of the frame. The window experiences very high friction when in this zone. </p><p>High-Friction Zone in Red. Low-Friction Zone in Green.</p><p><img src="https://cdn.shopify.com/s/files/1/0048/6244/3590/files/High_Friction_Zone.jpg?v=1610154965" alt="High Friction Zone"></p><p>You will be setting two current and stall values. One for the High and low zones. This way high current is only used in the High zone, allowing the motor to run quieter and cooler.</p><p>Watch this video to set the Just-Open position, which tells the window opener where to transition from High to Low settings. </p><figure class="video_container"><iframe src="https://drive.google.com/file/d/1VCFY0jOTt8wXNtpZYoyxfePHxuSMJxg1/preview" width="800" height="450" frameborder="0" allowfullscreen="true"></iframe></figure><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="5c-step-3---high-friction-current-calibration"></a>5c. Step 3 - High Friction Current Calibration<a class="hash-link" href="#5c-step-3---high-friction-current-calibration" title="Direct link to heading">#</a></h3><p>Press the Run button to start the calibration. The device will automatically figure out the best value for the high friction zone.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="5d-step-4---low-friction-current-calibration"></a>5d. Step 4 - Low Friction Current Calibration<a class="hash-link" href="#5d-step-4---low-friction-current-calibration" title="Direct link to heading">#</a></h3><p>Press the Run button to start the calibration. The device will automatically figure out the best value for the low friction zone.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="5e-step-5---high-friction-stall-calibration"></a>5e. Step 5 - High Friction Stall Calibration<a class="hash-link" href="#5e-step-5---high-friction-stall-calibration" title="Direct link to heading">#</a></h3><p>Press the Run button to start the calibration. The device will automatically figure out the best value for the high friction zone.</p><p>Stall values range from -64 to 63. <strong>Increasing</strong> the value will <strong>decrease</strong> the sensitivity. </p><p>If the device is still stalling when not required, increase this value by one until fixed.</p><p>If you place your finger in front of it and it does not stop, <strong>decrease</strong> the value in order to <strong>increase</strong> the sensitivity.</p><p><strong>NOTE:</strong> Cold weather may increase resistance and require recalibration</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="5f-step-6---low-friction-stall-calibration"></a>5f. Step 6 - Low Friction Stall Calibration<a class="hash-link" href="#5f-step-6---low-friction-stall-calibration" title="Direct link to heading">#</a></h3><p>Press the Run button to start the calibration. The device will automatically figure out the best value for the high friction zone.</p><p>If the device is still stalling when not required, increase this value by one until fixed. </p><p><strong>NOTE:</strong> Cold weather may increase resistance and require recalibration</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="6--integrating-google-assistant-alexa-and-more"></a>6.  Integrating Google Assistant, Alexa, and More.<a class="hash-link" href="#6--integrating-google-assistant-alexa-and-more" title="Direct link to heading">#</a></h2><p>Valar devices to do not yet have direct integration with Alexa and Google, however, you can use IFTTT to create a connection with almost any device out there.</p><p>This following method will use the VALAR API to trigger the curtains. Here is a brief overview of how it works.</p><p>Each device has a unique token assigned to it. You can trigger your device to open and close by sending an HTTP request using this token. </p><p>IFTTT works by triggering an HTTP request whenever a certain action is done.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="6a-opening-the-window"></a>6a. Opening the Window<a class="hash-link" href="#6a-opening-the-window" title="Direct link to heading">#</a></h3><p>1) Request your auth token by pressing the &quot;EMAIL&quot; button on the Valar device setup page<br>
2) Go to ifttt.com and create an account if you do not already have one<br>
3) Log in to ifttt.com<br>
4) If you have not already done so, add the IFTTT service to your Google assistant or Alexa device<br>
5) At top right search for Google assistant<br>
6) Click Google assistant connect<br>
7) Select your Google account<br>
8) Go to ‘My applets’<br>
9) Create a new applet<br>
10) Click the blue &quot;+this&quot; text<br>
11) In the search field type Google Assistant (or Alexa), press enter<br>
12) Select the Google assistant or Alexa trigger<br>
13) Google: Pick “Say a simple phrase”<br>
14) Click “Create Trigger”<br>
15) Click the blue +that  text<br>
16) In the search field type Webhooks<br>
17) Select Webhooks<br>
18) Click “Make a web request”<br>
19) Fill in the fields as below, but replace the “AUTH_TOKEN” field with your authorization code from your email. Copy the URL below.  </p><p><strong>The value parameter in the URL is the percentage of the window to open/close. Setting value=0 will close the window all the way, setting value=100 will open to 100%. Any value from 0-100 will work.</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">http://morningrod.blynk.cc/AUTH_TOKEN/update/V23?value=100</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><img src="https://cdn.shopify.com/s/files/1/0048/6244/3590/files/Screenshot_20210113-080313.png?v=1610553935" alt="Webhooks settings"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="6b-closing-the-window"></a>6b. Closing the Window<a class="hash-link" href="#6b-closing-the-window" title="Direct link to heading">#</a></h3><p>Do the same as above. But use this URL instead:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">http://morningrod.blynk.cc/AUTH_TOKEN/update/V23?value=0</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="7-mqtt-setup"></a>7. MQTT Setup<a class="hash-link" href="#7-mqtt-setup" title="Direct link to heading">#</a></h2><p>You can control your window locally via Home Assistant&#x27;s MQTT <a href="https://www.home-assistant.io/docs/mqtt/discovery" target="_blank" rel="noopener noreferrer">Auto Discovery feature</a></p><p>In the Valar App device settings, select the MQTT tab. </p><p><strong>NOTE:</strong> When entering values in the app, press the send button in the bottom right corner. Otherwise values won&#x27;t save.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="7a-home-assistant-mosquitto-setup"></a>7a. Home Assistant Mosquitto Setup<a class="hash-link" href="#7a-home-assistant-mosquitto-setup" title="Direct link to heading">#</a></h3><p>Install the <a href="https://github.com/home-assistant/addons/blob/master/mosquitto/DOCS.md" target="_blank" rel="noopener noreferrer">Mosquitto Add-On</a></p><p><strong>Create a username and password.</strong> You must make one for this to work
Go to Supervisor--&gt;Mosquitto Broker--&gt;Configuration</p><p>Add the following text to your configuration. Change the username and password:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">logins:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - username: username</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    password: password</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The configuration should look something like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">logins:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - username: username</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    password: password</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">anonymous: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">customize:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  active: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  folder: mosquitto</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">certfile: fullchain.pem</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">keyfile: privkey.pem</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">require_certificate: false</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Save it. Now we&#x27;ll set up the app and return to HA in a bit.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="7b-valar-app-setup"></a>7b. VALAR App Setup<a class="hash-link" href="#7b-valar-app-setup" title="Direct link to heading">#</a></h3><p>Open up the Valar app. Under the MQTT tab of your device, enter the following:</p><p>Device Name: Create a name. <strong>NO SPACES</strong>
Server IP Address: Enter your Home Assistant IP Address
MQTT Username: Enter the MQTT username you set earlier
MQTT Password: Enter password you set earlier
Prefix: Set as <strong>homeassistant</strong> in order to use Auto Discovery (recommended)</p><p>Press &quot;START&quot; button.</p><p>You will now see the MQTT Set Topic and State Topic to monitor in MQTT</p><p>The set topic is where you will control the device.</p><p>The state topic is where you monitor the state of the device.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="7c-mqtt-commands"></a>7c. MQTT Commands<a class="hash-link" href="#7c-mqtt-commands" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Set:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1. Send **CLOSE** to close the window completely.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2. Any digit from **1-100** will set the percent open. Send &quot;50&quot; to set 50% open. Send &quot;100&quot; to set 100% open.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">State:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1. State will return a percentage digit. </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2. 0 is Closed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">3. 1-100 is the percent open. </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="7d-mqtt-testing"></a>7d. MQTT Testing<a class="hash-link" href="#7d-mqtt-testing" title="Direct link to heading">#</a></h3><p>To test out MQTT, use the <a href="https://mqttfx.jensd.de/" target="_blank" rel="noopener noreferrer">MQTT FX app</a></p><p>Download and open it up. </p><p>First, we need to connect to the Broker
Open up the settings by clicking the gear icon</p><p><a href="https://cdn.shopify.com/s/files/1/0048/6244/3590/files/Mqtt_fx_settings.PNG?v=1610555014" target="_blank" rel="noopener noreferrer"></a></p><p>Go to User Credentials and enter the username and password you set up in the MQTT configuration</p><p><a href="https://cdn.shopify.com/s/files/1/0048/6244/3590/files/Mqtt_fx_settings_username.PNG?v=1610555014" target="_blank" rel="noopener noreferrer">website</a></p><p>Now connect to the broker. If everything is working, the status light should turn green</p><p>To test the connection, send a command to the window opener. </p><p>Type in the set topic
Enter a command to send in the command section
Press publish to send</p><p><a href="https://cdn.shopify.com/s/files/1/0048/6244/3590/files/Mqtt_fx_settings_send_arrow.png?v=1610557403" target="_blank" rel="noopener noreferrer">website</a></p><p>The window should open or close</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="7e-adding-to-your-dashboard"></a>7e. Adding To Your Dashboard<a class="hash-link" href="#7e-adding-to-your-dashboard" title="Direct link to heading">#</a></h3><p>Now we can add the window opener to HA. </p><p>Go to HA Overview tab.</p><p>In the top right corner, edit your dashboard.</p><p>In the top right corner, select Unused Entities.</p><p>The window opener should be listed here.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/Window Opener/valar_w1.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/VAL-1000/ESPHome"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« ESPHome Integration</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-download-the-app" class="table-of-contents__link">1. Download the App</a></li><li><a href="#2-reset-the-wifi" class="table-of-contents__link">2. Reset the WiFi</a></li><li><a href="#3-adding-device-in-app" class="table-of-contents__link">3. Adding Device in App</a><ul><li><a href="#3a-initial-test" class="table-of-contents__link">3a. Initial Test</a></li></ul></li><li><a href="#4-attaching-to-the-window" class="table-of-contents__link">4. Attaching to the Window</a><ul><li><a href="#4a-adjusting-sill-height" class="table-of-contents__link">4a. Adjusting Sill Height</a></li><li><a href="#4b-proper-positioning" class="table-of-contents__link">4b. Proper Positioning</a></li><li><a href="#4c-frame-and-sill-mount-setup" class="table-of-contents__link">4c. Frame and Sill Mount Setup</a></li><li><a href="#4d-straightening-the-window-opener" class="table-of-contents__link">4d. Straightening the Window Opener</a></li></ul></li><li><a href="#5-current-and-stall-setup" class="table-of-contents__link">5. Current and Stall Setup</a><ul><li><a href="#5a-step-1---set-max-distance" class="table-of-contents__link">5a. Step 1 - Set Max Distance</a></li><li><a href="#5b-step-2---set-just-open-position" class="table-of-contents__link">5b. Step 2 - Set Just-Open Position</a></li><li><a href="#5c-step-3---high-friction-current-calibration" class="table-of-contents__link">5c. Step 3 - High Friction Current Calibration</a></li><li><a href="#5d-step-4---low-friction-current-calibration" class="table-of-contents__link">5d. Step 4 - Low Friction Current Calibration</a></li><li><a href="#5e-step-5---high-friction-stall-calibration" class="table-of-contents__link">5e. Step 5 - High Friction Stall Calibration</a></li><li><a href="#5f-step-6---low-friction-stall-calibration" class="table-of-contents__link">5f. Step 6 - Low Friction Stall Calibration</a></li></ul></li><li><a href="#6--integrating-google-assistant-alexa-and-more" class="table-of-contents__link">6.  Integrating Google Assistant, Alexa, and More.</a><ul><li><a href="#6a-opening-the-window" class="table-of-contents__link">6a. Opening the Window</a></li><li><a href="#6b-closing-the-window" class="table-of-contents__link">6b. Closing the Window</a></li></ul></li><li><a href="#7-mqtt-setup" class="table-of-contents__link">7. MQTT Setup</a><ul><li><a href="#7a-home-assistant-mosquitto-setup" class="table-of-contents__link">7a. Home Assistant Mosquitto Setup</a></li><li><a href="#7b-valar-app-setup" class="table-of-contents__link">7b. VALAR App Setup</a></li><li><a href="#7c-mqtt-commands" class="table-of-contents__link">7c. MQTT Commands</a></li><li><a href="#7d-mqtt-testing" class="table-of-contents__link">7d. MQTT Testing</a></li><li><a href="#7e-adding-to-your-dashboard" class="table-of-contents__link">7e. Adding To Your Dashboard</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ca0b9dec.js"></script>
<script src="/assets/js/main.95cb241e.js"></script>
</body>
</html>